# -*- coding: utf-8 -*-
"""jaroflove

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1hnGIRppBDbYnY214WYh6b9xcROsJC6nt
"""

import streamlit as st
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
import time

# Function to display and animate the jar filling
def animate_jar(correct_answers, total_questions):
    # Load the image of the jar (create your own jar images or find one online)
    jar_image = 'path_to_jar_image.png'  # Replace with your jar image path

    # Calculate fill percentage
    fill_percentage = (correct_answers / total_questions) * 100

    # Display the jar image with the percentage of fill
    st.image(jar_image, use_container_width=True)
    st.write(f"The jar is {fill_percentage:.0f}% full of love!")

# Function to handle the question and answer logic
def ask_question(question, choices, correct_answer, question_index, correct_answers, questions):
    st.write(question)
    user_choice = st.radio("Choose an answer:", choices, key=f"question_{question_index}")

    answer_revealed = False
    if user_choice:
        if user_choice == correct_answer:
            st.success(f"Correct! The answer is: {correct_answer}")
            correct_answers += 1
        else:
            st.error(f"Oops! The correct answer was: {correct_answer}")

        answer_revealed = True

    # Display jar animation based on the correct answers so far
    animate_jar(correct_answers, len(questions))
    return answer_revealed, correct_answers

# Function for final message and the jar's completion
def final_message(correct_answers, total_questions):
    st.write(f"The jar is full of love!")
    st.write(f"You answered {correct_answers}/{total_questions} correctly.")
    st.write("But no matter what, you are always right. <3")

# Main app logic
def main():
    # List of questions, choices, and correct answers
    questions = [
        {"question": "What do I love most about you?", "choices": ["Humor", "Sex", "Affirmation", "Calling me out"], "correct_answer": "Calling me out"},
        {"question": "What do you think, I would choose as your favorite food?", "choices": ["Buldwak Ramen", "Thai soup", "Pasta", "Borger"], "correct_answer": "Buldwak Ramen"},
        {"question": "Where did we first meet?", "choices": ["Dream", "Cafe", "2 no. gate", "Your garage"], "correct_answer": "Cafe"},
        {"question": "What do you think, I would choose as your favorite movie from the options below?", "choices": ["Tangled", "Howls Moving Castle", "Whisper of the Heart", "From up on poppy hill"], "correct_answer": "Tangled"},
        {"question": "What's your dream vacation destination, I would choose?", "choices": ["Maldives", "Okinawa", "Bali", "Malaysia"], "correct_answer": "Bali"},
        {"question": "What our favorite hobby?", "choices": ["Reading", "Cooking", "Talking", "Laying down doing nothing"], "correct_answer": "Talking"},
        {"question": "Which animal I would bring home that you would love?", "choices": ["Dog", "Cat", "Hamster", "Tiger"], "correct_answer": "Cat"},
        {"question": "What's our favorite season?", "choices": ["Winter", "Spring", "Summer", "Autumn"], "correct_answer": "Spring"},
        {"question": "What type of music do I think, you like?", "choices": ["Pop", "Rock", "Classical", "Indie"], "correct_answer": "Indie"},
        {"question": "What do you think, I would choose as your favorite movie from the options below?", "choices": ["The Notebook", "Little Women", "Shrek", "Pride and Prejudice"], "correct_answer": "Little Women"},
    ]

    # Initialize session state to track the current question and the number of correct answers
    if "question_index" not in st.session_state:
        st.session_state.question_index = 0
    if "correct_answers" not in st.session_state:
        st.session_state.correct_answers = 0

    # Get the current question
    current_question = questions[st.session_state.question_index]

    # Ask the current question
    answer_revealed, st.session_state.correct_answers = ask_question(current_question['question'], current_question['choices'], current_question['correct_answer'], st.session_state.question_index, st.session_state.correct_answers, questions)

    # Button to go to the next question
    if answer_revealed:
        if st.button("Next", key=f"next_{st.session_state.question_index}"):
            if st.session_state.question_index < len(questions) - 1:
                st.session_state.question_index += 1
            else:
                # Final message once all questions are answered
                final_message(st.session_state.correct_answers, len(questions))
                st.session_state.question_index = 0  # Reset for potential replay

if __name__ == "__main__":
    main()